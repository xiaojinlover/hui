!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=40)}({40:function(t,n){mui.init({swipeBack:!0}),mui.plusReady(function(){function t(){var e=plus.webview.getWebviewById("ruzhi-wdll-grzl"),t=plus.webview.getWebviewById("ruzhi-wdll-jyjl"),n=plus.webview.getWebviewById("ruzhi-wdll-gzjl"),i=plus.webview.getWebviewById("ruzhi-wdll-jtbj"),t=plus.webview.getWebviewById("ruzhi-wdll-jyjl"),a=plus.webview.getWebviewById("li-ji-ru-zhi");null!=e&&e.close(),null!=t&&t.close(),null!=n&&n.close(),null!=i&&i.close(),null!=t&&t.close(),null!=a&&a.close()}function n(){plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){var t=e.toLocalURL()+"?version="+(new Date).getTime();if("isIos"==isAndroidIos())plus.zip.compressImage({src:t,dst:t,overwrite:!0,rotate:-90},function(){var e=new Image;e.src=t,e.onload=function(){var t=a(e);document.getElementById("image-view").setAttribute("src","data:image/png;base64,"+t),document.getElementById("image-view").setAttribute("class",""),l(t)}},function(e){console.log("旋转失败!")});else{var n=new Image;n.src=t,n.onload=function(){var e=a(n);document.getElementById("image-view").setAttribute("src","data:image/png;base64,"+e),document.getElementById("image-view").setAttribute("class",""),l(e)}}},function(e){console.log("读取拍照文件错误："+e.message)})},function(e){console.log("error"+e)},{filename:"_doc/zhengjian.png"})}function i(){plus.gallery.pick(function(t){plus.io.resolveLocalFileSystemURL(t,function(t){plus.io.resolveLocalFileSystemURL("_doc/",function(n){n.getFile("zhengjian.png",{},function(i){i.remove(function(){t.copyTo(n,"zhengjian.png",function(e){var t=e.fullPath+"?version="+(new Date).getTime(),n=new Image;n.src=t,n.onload=function(){var e=a(n);document.getElementById("image-view").setAttribute("src","data:image/png;base64,"+e),document.getElementById("image-view").setAttribute("class",""),l(e)}},function(e){console.log("copy image fail:"+e.message)})},function(){console.log("delete image fail:"+e.message)})},function(){t.copyTo(n,"zhengjian.png",function(e){var t=e.fullPath+"?version="+(new Date).getTime(),n=new Image;n.src=t,n.onload=function(){var e=a(n);document.getElementById("image-view").setAttribute("src","data:image/png;base64,"+e),document.getElementById("image-view").setAttribute("class",""),l(e)}},function(e){console.log("copy image fail:"+e.message)})})},function(e){console.log("get _www folder fail")})},function(e){console.log("读取拍照文件错误："+e.message)})},function(e){},{filter:"image"})}function a(e){var t=document.createElement("canvas"),n=e.width;if(n<=960)var n=e.width/2,i=e.height/2;else if(n>960&&n<2448)var n=e.width/3,i=e.height/3;else var n=e.width/6,i=e.height/6;return t.width=n,t.height=i,t.getContext("2d").drawImage(e,-0,-0,n,i),t.toDataURL("image/png",.1).replace("data:image/png;base64,","")}var o={token:plus.storage.getItem("token")};mui.ajax(apiUrl+"Employee/get_department_list",{data:o,type:"post",timeout:1e4,success:function(e){var e=JSON.parse(e);if(""!=e.data){var t=e.data;$("#nope").trigger("onkeyup"),$("#nope").autocompleter({highlightMatches:!0,source:t,template:"{{ label }} ",hint:!0,matchContains:!0,empty:!0,limit:5,callback:function(e,t,n){n&&($(".icon").css("background-color",n.hex),$("#department_id").val(n.department_id))}}),$("input").bind("input propertychange",function(){$("input").trigger("keyup")})}else mui.alert(e.detail)},beforeSend:function(){plus.nativeUI.showWaiting("玩命加载中...")},complete:function(){plus.nativeUI.closeWaiting()},error:function(e,t){mui.alert("参数错误："+t)}});var u={token:plus.storage.getItem("token"),type:"get"};mui.ajax(apiUrl+"Employee/self_judge",{data:u,type:"post",timeout:1e4,success:function(e){var e=JSON.parse(e);1==e.status&&null!=e.data&&(document.forms[0].self_judge.value=e.data.self_judge,document.forms[0].job_plan.value=e.data.job_plan,$("#department_id").val(e.data.department_id),$("#nope").val(e.data.department_name),""!=e.data.yi_cun_zhao&&($("#image-view").attr("src",e.data.yi_cun_zhao),$("#image-view").removeClass("mui-hidden")))},beforeSend:function(){plus.nativeUI.showWaiting("玩命加载中...")},complete:function(){plus.nativeUI.closeWaiting()},error:function(e,t){mui.alert("参数错误："+t)}}),mui(".mui-content-padded").on("tap","a",function(){if("wan-cheng-ru-zhi"==this.getAttribute("id")){var e={token:plus.storage.getItem("token"),self_judge:document.forms[0].self_judge.value,job_plan:document.forms[0].job_plan.value,department_id:$("#department_id").val(),type:"update"};return mui.ajax(apiUrl+"Employee/self_judge",{data:e,type:"post",timeout:1e4,success:function(e){var e=JSON.parse(e);t(),document.activeElement.blur(),mui.openWindow({url:"fortune.html",id:"fortune",createNew:!0,show:{autoShow:!0,aniShow:"slide-in-right"},waiting:{autoShow:!1,title:"拼命加载中..."}})},beforeSend:function(){plus.nativeUI.showWaiting("玩命加载中...")},complete:function(){plus.nativeUI.closeWaiting()},error:function(e,t){mui.alert("参数错误："+t)}}),!1}mui.confirm("是否确定取消入职",function(e){if(1==e.index){var n={token:plus.storage.getItem("token")};mui.ajax(apiUrl+"Employee/cancel_entry",{data:n,type:"post",timeout:1e4,success:function(e){var e=JSON.parse(e);1==e.status?mui.alert(e.detail,function(){t(),document.activeElement.blur(),mui.openWindow({url:"fortune.html",id:"fortune",createNew:!0,show:{autoShow:!0,aniShow:"slide-in-right"},waiting:{autoShow:!1,title:"拼命加载中..."}})}):mui.alert(e.detail)},beforeSend:function(){plus.nativeUI.showWaiting("玩命加载中...",{background:"rgba(0,0,0,0.5)"})},complete:function(){plus.nativeUI.closeWaiting()},error:function(e,t){mui.alert("参数错误："+t)}})}})}),mui.previewImage();var l=function(e){var t={token:plus.storage.getItem("token"),if_upload:1,yi_cun_zhao:e};mui.ajax("http://www.huirenshi.com/V2/App/upload_ycz_image",{data:t,type:"post",timeout:1e4,success:function(e){var e=JSON.parse(e);mui.toast(e.detail)},beforeSend:function(){plus.nativeUI.showWaiting("上传中...")},complete:function(){plus.nativeUI.closeWaiting()},error:function(e,t){"abort"==t?mui.alert("连接不到网络，请检查您当前的网络设置"):mui.alert("参数错误"+t)}})};mui(document).on("tap","#btn-box",function(e){if(mui.os.plus){var t=[{title:"拍照"},{title:"从手机相册选择"}];plus.nativeUI.actionSheet({title:"上传加盟凭证",cancel:"取消",buttons:t},function(e){switch(e.index){case 0:break;case 1:n();break;case 2:i()}})}})})}});